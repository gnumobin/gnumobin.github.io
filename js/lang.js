const langSelect=document.getElementById("langSelect"),savedLang=localStorage.getItem("preferredLang"),pathLang=window.location.pathname.split("/")[1],supportedLangs=["fa","en"],browserLang=(navigator.languages?.[0]||navigator.language||navigator.userLanguage||"en").toLowerCase(),currentLang=supportedLangs.includes(pathLang)?pathLang:null;if(currentLang)savedLang!==currentLang&&localStorage.setItem("preferredLang",currentLang);else{let e=savedLang||(browserLang.startsWith("fa")?"fa":"en");window.location.pathname!==`/${e}/`&&window.location.replace(`/${e}/`)}langSelect.value=currentLang||savedLang||"en",langSelect.addEventListener("change",e=>{let a=e.target.value;savedLang!==a&&(localStorage.setItem("preferredLang",a),window.location.replace(`/${a}/`))});
